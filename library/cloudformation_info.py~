#!/usr/bin/python
import boto.cloudformation
import shlex
from argparse import ArgumentParser

region_name = None
stack_name = None

# read the argument string from the arguments file
args_file = sys.argv[1]
args_data = file(args_file).read()

# for this module, we're going to do key=value style arguments
# this is up to each module to decide what it wants, but all
# core modules besides 'command' and 'shell' take key=value
# so this is highly recommended

arguments = shlex.split(args_data)
for arg in arguments:
   # ignore any arguments without an equals in it
   if "=" in arg:
      (key, value) = arg.split("=")
      if key == "region":
         region_name = value
      elif key == "stack_name":
         stack_name = value
         
if region_name is None:
   print json.dumps({
                    "failed" : True,
                    "msg"    : "region_name is required"
                })
                sys.exit(1)


conn = boto.cloudformation.connect_to_region(value)  # or your favorite region
stacks = conn.describe_stacks('BravoInfrastructure-integration')
if len(stacks) == 1:
    stack = stacks[0]
else:
   sys.exit(0)